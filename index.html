<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Duck Hunt Login</title>

  <script src="https://unpkg.com/html5-qrcode" type="text/javascript"></script>

  <style>
    body {
      margin: 0;
      height: 100vh;
      display: flex;
      justify-content: center;
      align-items: center;
      background: #000;
      font-family: "Helvetica Neue", Arial, sans-serif;
      color: white;
      overflow: hidden;
      position: relative;
      flex-direction: column;
    }

    /* orbit glows */
    .orbit { position: absolute; width: 700px; height: 700px; border-radius: 50%; pointer-events: none; z-index: 0; }
    .glow { position: absolute; width: 280px; height: 280px; border-radius: 50%; filter: blur(150px); opacity: 0.75; }
    .green { background: rgba(120, 255, 80, 1); animation: orbitLeft 28s linear infinite; }
    .pink { background: rgba(255, 80, 200, 1); animation: orbitRight 36s linear infinite; }
    @keyframes orbitLeft { 0% { transform: rotate(0deg) translateX(-260px) translateY(-120px); } 100% { transform: rotate(360deg) translateX(-260px) translateY(-120px); } }
    @keyframes orbitRight { 0% { transform: rotate(0deg) translateX(260px) translateY(120px); } 100% { transform: rotate(360deg) translateX(260px) translateY(120px); } }

    /* Login card */
    .login-card {
      z-index: 1;
      background: rgba(255, 255, 255, 0.12);
      backdrop-filter: blur(40px) saturate(240%) brightness(1.2);
      -webkit-backdrop-filter: blur(40px) saturate(240%) brightness(1.2);
      border-radius: 20px;
      padding: 40px 32px;
      width: 360px;
      text-align: center;
      border: 1px solid rgba(255, 255, 255, 0.35);
      box-shadow: 0 6px 28px rgba(0, 0, 0, 0.75);
      color: white;
      margin: auto;
    }
    .login-card img { max-width: 100%; margin-bottom: 16px; }

    .login-card input,
    .login-card button {
      display: block;
      width: 100%;
      box-sizing: border-box;
    }

    .login-card input {
      margin-bottom: 18px;
      padding: 14px;
      border-radius: 12px;
      font-size: 16px;
      background: rgba(255, 255, 255, 0.15);
      border: 1px solid rgba(255, 255, 255, 0.35);
      color: white;
      text-align: center;
    }

    input:focus {
      outline: none;
      border: 1px solid rgba(120, 255, 80, 0.9);
      box-shadow: 0 0 18px rgba(120, 255, 80, 0.7);
    }
    input::placeholder { color: rgba(255, 255, 255, 0.7); text-align: center; }

    button {
      padding: 14px;
      border-radius: 12px;
      font-size: 16px;
      font-weight: 600;
      margin-bottom: 14px;
      background: rgba(255, 255, 255, 0.12);
      border: 1px solid rgba(255, 255, 255, 0.35);
      color: white;
      cursor: pointer;
      transition: background 0.3s ease, transform 0.2s ease, box-shadow 0.3s ease;
    }
    button:hover { background: rgba(120, 255, 80, 0.25); box-shadow: 0 0 25px rgba(120, 255, 80, 0.8), 0 0 35px rgba(120, 255, 80, 0.6); transform: scale(1.05); }
    .secondary { background: rgba(255, 255, 255, 0.08); border: 1px solid rgba(255, 255, 255, 0.25); }
    .secondary:hover { background: rgba(120, 255, 80, 0.25); }

    .hidden { display: none !important; }

    /* Footer */
    .footer { position: absolute; bottom: 15px; width: 100%; text-align: center; z-index: 2; display: flex; flex-direction: column; align-items: center; gap: 8px; font-size: 14px; color: rgba(255, 255, 255, 0.9); }
    #login-footer img { height: 60px; }
    #home-screen .footer img { height: 120px; }

    /* Home screen */
    .home-screen { position: absolute; top: 0; left: 0; width: 100%; height: 100%; display: flex; flex-direction: column; align-items: center; z-index: 2; padding: 20px; box-sizing: border-box; }
    .frosted-box { background: rgba(255, 255, 255, 0.12); backdrop-filter: blur(40px) saturate(240%) brightness(1.2); -webkit-backdrop-filter: blur(40px) saturate(240%) brightness(1.2); border-radius: 20px; padding: 20px; text-align: center; border: 1px solid rgba(255, 255, 255, 0.35); box-shadow: 0 6px 28px rgba(0, 0, 0, 0.75); color: white; }

    .home-grid { display: grid; grid-template-columns: repeat(2, 1fr); gap: 20px; max-width: 700px; margin-top: 20px; justify-items: center; }
    .nav-bar { display: flex; justify-content: center; gap: 25px; font-size: 18px; font-weight: 600; margin-top: 30px; margin-bottom: 10px; }
    .nav-bar div { cursor: pointer; transition: color 0.3s, text-shadow 0.3s; }
    .nav-bar div:hover { color: #78ff50; text-shadow: 0 0 12px #78ff50; }

    .welcome-header { font-size: 24px; font-weight: 600; margin: 20px 0 10px 0; text-align: center; }

    /* Leaderboard styling */
    .leaderboard-box {
      width: 95%;
      max-width: 800px;
      margin: 30px auto;
      display: flex;
      justify-content: center;
    }
    .leaderboard-content {
      background: rgba(255,255,255,0.1);
      backdrop-filter: blur(25px);
      border-radius: 20px;
      padding: 25px;
      color: white;
      text-align: center;
      width: 100%;
    }

    .leaderboard-title { font-size: 36px; font-weight: 700; margin-bottom: 25px; color: white; }

    .leaderboard-table {
      width: 100%;
      max-width: 700px;
      margin: 0 auto;
      border-collapse: collapse;
      border-radius: 12px;
      overflow: hidden;
      font-size: 18px;
    }
    .leaderboard-table th, .leaderboard-table td { padding: 14px 18px; text-align: center; }
    .leaderboard-table thead { background: rgba(255, 255, 255, 0.2); }
    .leaderboard-table tr:nth-child(even) { background: rgba(255, 255, 255, 0.05); }
    .leaderboard-table tr.highlight { background: rgba(120, 255, 80, 0.15); box-shadow: 0 0 10px rgba(120, 255, 80, 0.7); }

    .leaderboard-table tr:nth-child(1) td:first-child::after { content: " ü•á"; }
    .leaderboard-table tr:nth-child(2) td:first-child::after { content: " ü•à"; }
    .leaderboard-table tr:nth-child(3) td:first-child::after { content: " ü•â"; }

    /* QR Scanner */
    #qr-reader { width: 300px; height: 300px; margin: auto; border-radius: 12px; overflow: hidden; }
    #qr-result { margin-top: 15px; font-size: 16px; font-weight: 500; color: #78ff50; }
    .map-image { max-width: 100%; border-radius: 12px; }
  </style>
</head>
<body>
  <!-- orbit containers -->
  <div class="orbit"><div class="glow green"></div></div>
  <div class="orbit"><div class="glow pink"></div></div>

  <!-- Login Screen -->
  <div id="auth-container" class="login-card">
    <img src="https://i.imgur.com/piKjXSd.png" alt="Duck Hunt Logo" />
    <div id="login-form">
      <input type="text" id="student-id" placeholder="Enter Student ID">
      <button onclick="login()">Sign In</button>
      <button class="secondary" onclick="toggleForm()">Register</button>
    </div>
    <div id="register-form" class="hidden">
      <input type="text" placeholder="First Name">
      <input type="text" placeholder="Last Name">
      <input type="text" placeholder="Student ID">
      <input type="email" placeholder="my.gcu.edu Email">
      <button>Register</button>
      <button class="secondary" onclick="toggleForm()">Back to Login</button>
    </div>
  </div>

  <!-- Footer -->
  <div class="footer" id="login-footer">
    <img src="https://i.imgur.com/p2qZOL5.png" alt="CAB Logo" />
    <div>Hosted by the Canyon Activities Board<br/>Grand Canyon University</div>
  </div>

  <!-- Home Screen -->
  <div id="home-screen" class="hidden home-screen">
    <div class="nav-bar">
      <div onclick="showPage('home')">Home</div>
      <div onclick="showPage('leaderboard')">Leaderboard</div>
      <div onclick="showPage('scanner')">QR Code Scanner</div>
      <div onclick="showPage('map')">Map</div>
    </div>
    <div id="page-content" style="flex:1; display:flex; justify-content:center; align-items:center; flex-direction:column;"></div>
    <div class="footer">
      <img src="https://i.imgur.com/piKjXSd.png" alt="Duck Hunt Logo" />
    </div>
  </div>

  <script>
    let studentName = "";
    let points = 0;
    let ducks = 0;
    let totalDucks = 50;
    let position = "--";

    const leaderboardData = [
      { name: "Alice", points: 120, ducks: 12 },
      { name: "Bob", points: 100, ducks: 10 },
      { name: "Charlie", points: 80, ducks: 8 },
      { name: "Diana", points: 70, ducks: 7 },
      { name: "Ethan", points: 50, ducks: 5 },
    ];

    function toggleForm() {
      document.getElementById("login-form").classList.toggle("hidden");
      document.getElementById("register-form").classList.toggle("hidden");
    }

    function login() {
      const id = document.getElementById("student-id").value.trim();
      if (id) {
        studentName = id;
        document.getElementById("auth-container").classList.add("hidden");
        document.getElementById("login-footer").classList.add("hidden");
        document.getElementById("home-screen").classList.remove("hidden");
        showPage("home");
      } else {
        alert("Please enter a Student ID.");
      }
    }

    function showPage(page) {
      const content = document.getElementById("page-content");
      content.innerHTML = "";

      if (page === "home") {
        const welcome = document.createElement("div");
        welcome.className = "welcome-header";
        welcome.textContent = `Welcome ${studentName}!`;
        content.appendChild(welcome);

        const grid = document.createElement("div");
        grid.className = "home-grid";
        grid.innerHTML = `
          <div class="frosted-box">
            <h3>Ducks You‚Äôve Found</h3>
            <p>You have collected <strong>${ducks}</strong> out of <strong>${totalDucks}</strong> ducks so far.</p>
          </div>
          <div class="frosted-box">
            <h3>Points You‚Äôve Earned</h3>
            <p>Your total points are <strong>${points}</strong>. Keep scanning ducks to earn more!</p>
          </div>
          <div class="frosted-box">
            <h3>Your Leaderboard Status</h3>
            <p>You are currently ranked <strong>${position}</strong> among all players.</p>
          </div>
          <div class="frosted-box">
            <h3>Ducks Still Waiting to Be Found</h3>
            <p>There are <strong>${totalDucks - ducks}</strong> ducks left on campus for you to discover.</p>
          </div>
        `;
        content.appendChild(grid);
      }

      if (page === "leaderboard") {
        const box = document.createElement("div");
        box.className = "leaderboard-box";
        box.innerHTML = `
          <div class="leaderboard-content">
            <div class="leaderboard-title">üèÜ Leaderboard</div>
            <table class="leaderboard-table">
              <thead>
                <tr><th>Rank</th><th>Name</th><th>Points</th><th>Ducks</th></tr>
              </thead>
              <tbody>
                ${leaderboardData.map((row, i) => `
                  <tr class="${row.name === studentName ? 'highlight' : ''}">
                    <td>#${i+1}</td>
                    <td>${row.name}</td>
                    <td>${row.points}</td>
                    <td>${row.ducks}</td>
                  </tr>
                `).join("")}
              </tbody>
            </table>
          </div>
        `;
        content.appendChild(box);
      }

      if (page === "scanner") {
        const box = document.createElement("div");
        box.className = "frosted-box";
        box.innerHTML = `
          <div style="font-size:20px; font-weight:600; margin-bottom:10px;">QR Code Scanner</div>
          <div id="qr-reader"></div>
          <div id="qr-result">Scan a QR code...</div>
        `;
        content.appendChild(box);

        const html5QrCode = new Html5Qrcode("qr-reader");
        html5QrCode.start(
          { facingMode: "environment" },
          { fps: 10, qrbox: 250 },
          qrCodeMessage => {
            document.getElementById("qr-result").innerText = `Scanned: ${qrCodeMessage}`;
          },
          errorMessage => {}
        ).catch(err => {
          document.getElementById("qr-result").innerText = "Camera error: " + err;
        });
      }

      if (page === "map") {
        const box = document.createElement("div");
        box.className = "frosted-box";
        box.innerHTML = `
          <div style="font-size:20px; font-weight:600; margin-bottom:10px;">GCU Campus Map</div>
          <img src="https://i.imgur.com/MGb5SBU.png" alt="GCU Campus Map" class="map-image" />
        `;
        content.appendChild(box);
      }
    }
  </script>
</body>
</html>
