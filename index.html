<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no" />
<title>Duck Hunt</title>
<script src="https://unpkg.com/html5-qrcode" type="text/javascript"></script>
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.0/css/all.min.css"/>

<style>
body, html {
margin: 0; padding: 0;
width: 100%; height: 100%;
background: #000;
display: flex; justify-content: center; align-items: center;
font-family: "Helvetica Neue", Arial, sans-serif;
overflow: hidden;
}

#app {
width: 100%;
max-width: 430px;
height: 100%;
max-height: 932px;
background: #000;
position: relative;
overflow: hidden;
border-radius: 24px;
border: 2px solid rgba(255,255,255,0.15);
box-shadow: 0 0 25px rgba(0,0,0,0.8);
}

/* orbit background */
.orbit { position: absolute; width: 500px; height: 500px; border-radius: 50%; pointer-events: none; z-index: 0; }
.glow { position: absolute; width: 200px; height: 200px; border-radius: 50%; filter: blur(120px); opacity: 0.75; }
.green { background: rgba(120, 255, 80, 1); animation: orbitLeft 25s linear infinite; }
.pink { background: rgba(255, 80, 200, 1); animation: orbitRight 30s linear infinite; }

@keyframes orbitLeft {
0% { transform: rotate(0deg) translateX(-180px) translateY(-100px); }
100% { transform: rotate(360deg) translateX(-180px) translateY(-100px); }
}
@keyframes orbitRight {
0% { transform: rotate(0deg) translateX(180px) translateY(100px); }
100% { transform: rotate(360deg) translateX(180px) translateY(100px); }
}

.hidden { display: none !important; }

/* --- PWA Prompt Style (Minimized) --- */
#pwa-prompt {
    position: absolute;
    top: 20px;
    left: 50%;
    transform: translateX(-50%);
    width: 90%;
    max-width: 380px;
    background: rgba(255, 255, 255, 0.12);
    backdrop-filter: blur(15px);
    color: white;
    padding: 8px 15px;
    border-radius: 12px;
    text-align: center;
    font-size: 14px;
    font-weight: 600;
    border: 1px solid rgba(255, 255, 255, 0.35);
    box-shadow: 0 4px 10px rgba(0, 0, 0, 0.4);
    z-index: 10;
    display: flex;
    justify-content: space-between;
    align-items: center;
}
#pwa-prompt-close {
    font-size: 18px;
    cursor: pointer;
    opacity: 0.7;
    margin-left: 15px;
    transition: opacity 0.2s;
}
#pwa-prompt-close:hover {
    opacity: 1;
}

/* Login/Register card - FROSTED BLACK */
.login-card {
position: absolute; 
top: 50%; 
left: 50%; 
transform: translate(-50%, -50%);
background: rgba(0, 0, 0, 0.45); /* Frosted Black Background */
backdrop-filter: blur(25px); /* Frosted Blur Effect */
border-radius: 16px;
padding: 25px 20px;
width: 85%; max-width: 320px;
text-align: center;
border: 1px solid rgba(255, 255, 255, 0.35);
box-shadow: 0 8px 22px rgba(0,0,0,0.6);
z-index: 1;
}
/* Re-applying logo styles for when it's inside the card */
.login-card img { max-width: 70%; margin-bottom: 16px; }

.login-card input,
.login-card button { width: 100%; box-sizing: border-box; }
.login-card input {
margin-bottom: 14px; padding: 14px;
border-radius: 12px; font-size: 16px;
background: rgba(255, 255, 255, 0.15);
border: 1px solid rgba(255, 255, 255, 0.35);
color: white; text-align: center;
}
button {
padding: 14px; border-radius: 12px;
font-size: 16px; font-weight: 600;
margin-bottom: 12px;
background: rgba(255,255,255,0.12);
border: 1px solid rgba(255,255,255,0.35);
color: white; cursor: pointer;
transition: border-color 0.25s, box-shadow 0.25s, transform 0.15s;
}
/* Apply Frosted Black Hover Look to all buttons */
button:hover { 
  border-color: rgba(255, 255, 255, 0.15); 
  background: rgba(0, 0, 0, 0.55); 
  box-shadow: 0 0 10px rgba(0, 0, 0, 0.5);
  transform: translateY(-1px);
}


/* Welcome */
.welcome-header { 
font-size: 22px; 
font-weight: 700; 
margin: 0 0 22px 0; 
text-align: center; 
color: #ffffff;
}

/* Home menu */
#home-screen {
position: absolute;
top: 0; left: 0;
width: 100%; height: 100%;
display: flex;
flex-direction: column;
justify-content: center; 
align-items: center; ¬† ¬† ¬†
text-align: center;
padding: 20px;
box-sizing: border-box;
}

/* Menu buttons ‚Äî frosted black style */
.frosted-rect {
backdrop-filter: blur(20px);
border-radius: 16px;
padding: 18px;
color: white;
width: 100%;
max-width: 300px;
font-size: 18px; font-weight:600;
margin: 12px auto;
cursor: pointer;
display: flex; align-items: center; justify-content: center; gap: 10px;
background: rgba(0, 0, 0, 0.45); 
box-shadow: 0 6px 14px rgba(0,0,0,0.45);
border: 2px solid rgba(255,255,255,0.15);
transition: border-color 0.25s, transform 0.15s, background 0.25s, box-shadow 0.25s;
}
.frosted-rect i {
font-size: 20px;
transition: transform 0.2s ease;
color: #FFFFFF;
}
/* Hover animations */
.frosted-rect:hover { animation: pulse 0.6s ease; }
.frosted-rect:hover i { animation: bounce 0.4s ease; }

@keyframes pulse {
0% ¬† { transform: scale(1); }
50% ¬†{ transform: scale(1.03); }
100% { transform: scale(1); }
}
@keyframes bounce {
0% ¬† { transform: scale(1); }
30% ¬†{ transform: scale(1.25); }
60% ¬†{ transform: scale(0.9); }
100% { transform: scale(1); }
}

/* Icons hover/active effects - FROSTED BLACK LOOK */
.frosted-rect:hover, .frosted-rect.active {
border-color: rgba(255, 255, 255, 0.15); 
background: rgba(0, 0, 0, 0.55);
box-shadow: 0 0 10px rgba(0, 0, 0, 0.5);
}

/* Page view */
#page-screen {
position:absolute; top:0; left:0;
width:100%; height:100%;
background: rgba(0,0,0,0.9);
display:flex; flex-direction:column; justify-content:center; align-items:center;
padding:20px;
text-align:center;
}

/* Back button styled */
.back-btn {
position: absolute;
top: 20px; left: 20px;
cursor: pointer;
font-size: 16px;
font-weight: 600;
color: white;
background: rgba(255, 255, 255, 0.12);
border: 1px solid rgba(255, 255, 255, 0.35);
border-radius: 12px;
padding: 8px 14px;
backdrop-filter: blur(15px);
transition: border-color 0.25s, transform 0.15s, background 0.25s, box-shadow 0.25s;
}
.back-btn:hover {
border-color: rgba(255, 255, 255, 0.15); 
background: rgba(0, 0, 0, 0.55);
transform: translateY(-2px);
box-shadow: 0 0 10px rgba(0, 0, 0, 0.5);
}

.leaderboard-content {
background: rgba(255,255,255,0.1);
border-radius:12px;
padding:14px;
width:100%;
max-width: 380px;
font-size: 14px;
text-align: center;
}

/* Footer - NOW FROSTED BLACK */
.home-footer {
position:absolute; bottom:0; left:0; width:100%;
text-align:center; font-size:12px; color:rgba(255,255,255,0.8);
background:rgba(0,0,0,0.45); /* Frosted Black Background */
backdrop-filter:blur(10px);
border-top:1px solid rgba(255,255,255,0.15); /* Subtler Border */
padding:12px 0;
z-index: 5;
}
</style>
</head>
<body>
<div id="app">
<div class="orbit"><div class="glow green"></div></div>
<div class="orbit"><div class="glow pink"></div></div>

<div id="pwa-prompt">
    Get the App
    <span id="pwa-prompt-close" onclick="dismissPrompt()">&times;</span>
</div>

<div id="auth-container" class="login-card">
<img src="https://i.imgur.com/piKjXSd.png" alt="Duck Hunt Logo" />
<div id="login-form">
<input type="text" id="student-id" placeholder="Enter Student ID">
<button onclick="login()">Sign In</button>
<button class="secondary" onclick="toggleForm()">Register</button>
</div>
<div id="register-form" class="hidden">
<input type="text" placeholder="First Name">
<input type="text" placeholder="Last Name">
<input type="text" placeholder="Student ID">
<input type="email" placeholder="my.gcu.edu Email">
<button onclick="register()">Register</button>
<button class="secondary" onclick="toggleForm()">Back to Login</button>
</div>
</div>

<div id="home-screen" class="hidden">
<img src="https://i.imgur.com/piKjXSd.png" alt="Duck Hunt Logo" style="max-width: 60%; margin-bottom: 20px;" />
<div class="welcome-header" id="welcome-text"></div>
<div class="frosted-rect btn-home" onclick="openPage('stats')"><i class="fa-solid fa-house"></i> Home</div>
<div class="frosted-rect btn-leaderboard" onclick="openPage('leaderboard')"><i class="fa-solid fa-trophy"></i> Leaderboard</div>
<div class="frosted-rect btn-scanner" onclick="openPage('scanner')"><i class="fa-solid fa-qrcode"></i> Scanner</div>
<div class="frosted-rect btn-map" onclick="openPage('map')"><i class="fa-solid fa-map"></i> Map</div>
</div>

<div id="page-screen" class="hidden"></div>

<div class="home-footer">
<img src="https://i.imgur.com/p2qZOL5.png" alt="CAB Logo" style="height:40px; display:block; margin:0 auto 6px;" />
Hosted by the Canyon Activities Board<br/>Grand Canyon University
</div>

</div>

<script>
let studentName = "";
let points = 0;
let ducks = 0;
let totalDucks = 50;
let position = "--";

const leaderboardData = [
{ name: "Alice", points: 120, ducks: 12 },
{ name: "Bob", points: 100, ducks: 10 },
{ name: "Charlie", points: 80, ducks: 8 },
{ name: "Diana", points: 70, ducks: 7 },
{ name: "Ethan", points: 50, ducks: 5 },
];

function toggleForm() {
document.getElementById("login-form").classList.toggle("hidden");
document.getElementById("register-form").classList.toggle("hidden");
}

function login() {
const id = document.getElementById("student-id").value.trim();
if (id) {
studentName = id;
document.getElementById("auth-container").classList.add("hidden");
document.getElementById("pwa-prompt").classList.add("hidden"); 
document.getElementById("home-screen").classList.remove("hidden");
document.getElementById("welcome-text").textContent = `Welcome ${studentName}!`;
} else {
alert("Please enter a Student ID.");
}
}

function register() {
alert("Registered! You can now sign in.");
toggleForm();
}

function dismissPrompt() {
    document.getElementById("pwa-prompt").classList.add("hidden");
}

function openPage(page) {
// Remove any existing active states
document.querySelectorAll('.frosted-rect').forEach(btn => btn.classList.remove('active'));

// Add active to the clicked button
const btn = {
stats: document.querySelector('.btn-home'),
leaderboard: document.querySelector('.btn-leaderboard'),
scanner: document.querySelector('.btn-scanner'),
map: document.querySelector('.btn-map')
}[page];
if (btn) btn.classList.add('active');

// Hide menu, show page
document.getElementById("home-screen").classList.add("hidden");
const pageScreen = document.getElementById("page-screen");
pageScreen.classList.remove("hidden");

// Ensure PWA prompt is hidden during navigation
document.getElementById("pwa-prompt").classList.add("hidden");

let html = `
<div class="back-btn" onclick="closePage()">‚Üê Back</div>
<div style="flex:1; display:flex; justify-content:center; align-items:center; flex-direction:column; width:100%;">
`;

if (page === "stats") {
html += `<div class="leaderboard-content"><h3>Your Stats</h3>
<p>Ducks Found: ${ducks} / ${totalDucks}</p>
<p>Points: ${points}</p>
<p>Rank: ${position}</p></div>`;
}
if (page === "leaderboard") {
html += `<div class="leaderboard-content"><h3>üèÜ Leaderboard</h3><table style="width:100%;">
<thead><tr><th>Rank</th><th>Name</th><th>Points</th><th>Ducks</th></tr></thead>
<tbody>${leaderboardData.map((row, i) =>
`<tr><td>#${i+1}</td><td>${row.name}</td><td>${row.points}</td><td>${row.ducks}</td></tr>`
).join("")}</tbody></table></div>`;
}
if (page === "scanner") {
html += `<div class="leaderboard-content"><h3>QR Code Scanner</h3>
<div id="qr-reader"></div><div id="qr-result">Scan a QR code...</div></div>`;
setTimeout(() => {
const html5QrCode = new Html5Qrcode("qr-reader");
html5QrCode.start(
{ facingMode: "environment" },
{ fps: 10, qrbox: 220 },
qrCodeMessage => {
document.getElementById("qr-result").innerText = `Scanned: ${qrCodeMessage}`;
}
).catch(err => {
document.getElementById("qr-result").innerText = "Camera error: " + err;
});
}, 300);
}
if (page === "map") {
html += `<div class="leaderboard-content"><h3>Campus Map</h3>
<img src="https://i.imgur.com/MGb5SBU.png" style="width:100%; border-radius:10px;"/></div>`;
}

// Footer is not added here as it's outside the page-screen div now.
html += `
</div>
`;

pageScreen.innerHTML = html;
}

function closePage() {
document.getElementById("page-screen").classList.add("hidden");
document.getElementById("home-screen").classList.remove("hidden");

// Remove all active glows when back
document.querySelectorAll('.frosted-rect').forEach(btn => btn.classList.remove('active'));
}
</script>
</body>
</html>
