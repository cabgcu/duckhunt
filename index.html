<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=no" />
  <title>Duck Hunt</title>

  <script src="https://unpkg.com/html5-qrcode" type="text/javascript"></script>

  <style>
    body {
      margin: 0;
      height: 100vh;
      display: flex;
      justify-content: center;
      align-items: center;
      background: #000;
      font-family: "Helvetica Neue", Arial, sans-serif;
      color: white;
      overflow: hidden;
      position: relative;
      flex-direction: column;
      padding: 0;
      box-sizing: border-box;
    }

    /* orbit background */
    .orbit { position: absolute; width: 600px; height: 600px; border-radius: 50%; pointer-events: none; z-index: 0; }
    .glow { position: absolute; width: 220px; height: 220px; border-radius: 50%; filter: blur(120px); opacity: 0.75; }
    .green { background: rgba(120, 255, 80, 1); animation: orbitLeft 25s linear infinite; }
    .pink { background: rgba(255, 80, 200, 1); animation: orbitRight 30s linear infinite; }
    @keyframes orbitLeft { 0% { transform: rotate(0deg) translateX(-200px) translateY(-100px); } 100% { transform: rotate(360deg) translateX(-200px) translateY(-100px); } }
    @keyframes orbitRight { 0% { transform: rotate(0deg) translateX(200px) translateY(100px); } 100% { transform: rotate(360deg) translateX(200px) translateY(100px); } }

    /* Login card */
    .login-card {
      z-index: 1;
      background: rgba(255, 255, 255, 0.12);
      backdrop-filter: blur(30px) saturate(240%) brightness(1.2);
      -webkit-backdrop-filter: blur(30px) saturate(240%) brightness(1.2);
      border-radius: 16px;
      padding: 30px 20px;
      width: 95%;
      max-width: 360px;
      text-align: center;
      border: 1px solid rgba(255, 255, 255, 0.35);
      box-shadow: 0 6px 20px rgba(0, 0, 0, 0.75);
      color: white;
      margin: auto;
    }
    .login-card img { max-width: 80%; margin-bottom: 16px; }

    .login-card input,
    .login-card button {
      display: block;
      width: 100%;
      box-sizing: border-box;
    }

    .login-card input {
      margin-bottom: 16px;
      padding: 16px;
      border-radius: 12px;
      font-size: 18px;
      background: rgba(255, 255, 255, 0.15);
      border: 1px solid rgba(255, 255, 255, 0.35);
      color: white;
      text-align: center;
    }

    input:focus {
      outline: none;
      border: 1px solid rgba(120, 255, 80, 0.9);
      box-shadow: 0 0 12px rgba(120, 255, 80, 0.7);
    }
    input::placeholder { color: rgba(255, 255, 255, 0.7); text-align: center; }

    button {
      padding: 16px;
      border-radius: 12px;
      font-size: 18px;
      font-weight: 600;
      margin-bottom: 14px;
      background: rgba(255, 255, 255, 0.12);
      border: 1px solid rgba(255, 255, 255, 0.35);
      color: white;
      cursor: pointer;
      transition: background 0.3s ease, transform 0.2s ease, box-shadow 0.3s ease;
    }
    button:hover { background: rgba(120, 255, 80, 0.25); transform: scale(1.03); }
    .secondary { background: rgba(255, 255, 255, 0.08); }

    .hidden { display: none !important; }

    /* Footer */
    .footer { position: absolute; bottom: 10px; width: 100%; text-align: center; z-index: 2; font-size: 12px; color: rgba(255, 255, 255, 0.8); }
    #login-footer img { height: 40px; margin-bottom: 6px; }
    #home-screen .footer img { height: 60px; }

    /* Home screen */
    .home-screen { position: absolute; top: 0; left: 0; width: 100%; height: 100%; display: flex; flex-direction: column; align-items: center; z-index: 2; padding: 15px; box-sizing: border-box; overflow-y: auto; }
    .frosted-box { background: rgba(255, 255, 255, 0.12); backdrop-filter: blur(25px) saturate(200%); border-radius: 16px; padding: 20px; text-align: center; border: 1px solid rgba(255, 255, 255, 0.35); color: white; width: 95%; }

    .home-grid { display: grid; grid-template-columns: 1fr; gap: 15px; width: 100%; max-width: 450px; margin-top: 15px; }

    .welcome-header { font-size: 22px; font-weight: 600; margin: 10px 0 5px 0; text-align: center; }

    /* Bottom navigation bar */
    .nav-bar {
      position: fixed;
      bottom: 0;
      left: 0;
      width: 100%;
      height: 60px;
      background: rgba(255, 255, 255, 0.08);
      display: flex;
      justify-content: space-around;
      align-items: center;
      font-size: 14px;
      font-weight: 600;
      border-top: 1px solid rgba(255,255,255,0.25);
      backdrop-filter: blur(15px);
      z-index: 10;
    }
    .nav-bar div { flex: 1; text-align: center; cursor: pointer; padding: 8px 0; }
    .nav-bar div:hover { color: #78ff50; }

    /* Leaderboard */
    .leaderboard-content { background: rgba(255,255,255,0.1); backdrop-filter: blur(20px); border-radius: 16px; padding: 15px; color: white; text-align: center; width: 95%; max-width: 500px; overflow-x: auto; }
    .leaderboard-title { font-size: 24px; font-weight: 700; margin-bottom: 15px; }
    .leaderboard-table { width: 100%; min-width: 350px; font-size: 16px; border-collapse: collapse; }
    .leaderboard-table th, .leaderboard-table td { padding: 10px; text-align: center; }
    .leaderboard-table thead { background: rgba(255,255,255,0.2); }
    .leaderboard-table tr:nth-child(even) { background: rgba(255,255,255,0.05); }
    .leaderboard-table tr.highlight { background: rgba(120, 255, 80, 0.2); }

    /* QR Scanner */
    #qr-reader { width: 95%; max-width: 350px; aspect-ratio: 1/1; margin: auto; border-radius: 12px; overflow: hidden; }
    #qr-result { margin-top: 10px; font-size: 14px; color: #78ff50; }
  </style>
</head>
<body>
  <!-- orbit containers -->
  <div class="orbit"><div class="glow green"></div></div>
  <div class="orbit"><div class="glow pink"></div></div>

  <!-- Login Screen -->
  <div id="auth-container" class="login-card">
    <img src="https://i.imgur.com/piKjXSd.png" alt="Duck Hunt Logo" />
    <div id="login-form">
      <input type="text" id="student-id" placeholder="Enter Student ID">
      <button onclick="login()">Sign In</button>
      <button class="secondary" onclick="toggleForm()">Register</button>
    </div>
    <div id="register-form" class="hidden">
      <input type="text" placeholder="First Name">
      <input type="text" placeholder="Last Name">
      <input type="text" placeholder="Student ID">
      <input type="email" placeholder="my.gcu.edu Email">
      <button>Register</button>
      <button class="secondary" onclick="toggleForm()">Back to Login</button>
    </div>
  </div>

  <!-- Footer (Login only) -->
  <div class="footer" id="login-footer">
    <img src="https://i.imgur.com/p2qZOL5.png" alt="CAB Logo" />
    <div>Hosted by the Canyon Activities Board<br/>Grand Canyon University</div>
  </div>

  <!-- Home Screen -->
  <div id="home-screen" class="hidden home-screen">
    <div id="page-content" style="flex:1; width:100%; display:flex; flex-direction:column; align-items:center;"></div>
    <div class="footer"><img src="https://i.imgur.com/piKjXSd.png" alt="Duck Hunt Logo" /></div>
    <div class="nav-bar">
      <div onclick="showPage('home')">Home</div>
      <div onclick="showPage('leaderboard')">Leaderboard</div>
      <div onclick="showPage('scanner')">Scanner</div>
      <div onclick="showPage('map')">Map</div>
    </div>
  </div>

  <script>
    let studentName = "";
    let points = 0;
    let ducks = 0;
    let totalDucks = 50;
    let position = "--";

    const leaderboardData = [
      { name: "Alice", points: 120, ducks: 12 },
      { name: "Bob", points: 100, ducks: 10 },
      { name: "Charlie", points: 80, ducks: 8 },
      { name: "Diana", points: 70, ducks: 7 },
      { name: "Ethan", points: 50, ducks: 5 },
    ];

    function toggleForm() {
      document.getElementById("login-form").classList.toggle("hidden");
      document.getElementById("register-form").classList.toggle("hidden");
    }

    function login() {
      const id = document.getElementById("student-id").value.trim();
      if (id) {
        studentName = id;
        document.getElementById("auth-container").classList.add("hidden");
        document.getElementById("login-footer").classList.add("hidden");
        document.getElementById("home-screen").classList.remove("hidden");
        showPage("home");
      } else {
        alert("Please enter a Student ID.");
      }
    }

    function showPage(page) {
      const content = document.getElementById("page-content");
      content.innerHTML = "";

      if (page === "home") {
        const welcome = document.createElement("div");
        welcome.className = "welcome-header";
        welcome.textContent = `Welcome ${studentName}!`;
        content.appendChild(welcome);

        const grid = document.createElement("div");
        grid.className = "home-grid";
        grid.innerHTML = `
          <div class="frosted-box"><h3>Ducks You‚Äôve Found</h3><p>${ducks} of ${totalDucks}</p></div>
          <div class="frosted-box"><h3>Points You‚Äôve Earned</h3><p>${points} total</p></div>
          <div class="frosted-box"><h3>Your Leaderboard Status</h3><p>Rank: ${position}</p></div>
          <div class="frosted-box"><h3>Ducks Still to Find</h3><p>${totalDucks - ducks} remaining</p></div>
        `;
        content.appendChild(grid);
      }

      if (page === "leaderboard") {
        const box = document.createElement("div");
        box.className = "leaderboard-content";
        box.innerHTML = `
          <div class="leaderboard-title">üèÜ Leaderboard</div>
          <table class="leaderboard-table">
            <thead><tr><th>Rank</th><th>Name</th><th>Points</th><th>Ducks</th></tr></thead>
            <tbody>
              ${leaderboardData.map((row, i) => `
                <tr class="${row.name === studentName ? 'highlight' : ''}">
                  <td>#${i+1}</td>
                  <td>${row.name}</td>
                  <td>${row.points}</td>
                  <td>${row.ducks}</td>
                </tr>`).join("")}
            </tbody>
          </table>
        `;
        content.appendChild(box);
      }

      if (page === "scanner") {
        const box = document.createElement("div");
        box.className = "frosted-box";
        box.innerHTML = `
          <div style="font-size:18px; font-weight:600; margin-bottom:8px;">QR Code Scanner</div>
          <div id="qr-reader"></div>
          <div id="qr-result">Scan a QR code...</div>
        `;
        content.appendChild(box);

        const html5QrCode = new Html5Qrcode("qr-reader");
        html5QrCode.start(
          { facingMode: "environment" },
          { fps: 10, qrbox: 200 },
          qrCodeMessage => {
            document.getElementById("qr-result").innerText = `Scanned: ${qrCodeMessage}`;
          },
          errorMessage => {}
        ).catch(err => {
          document.getElementById("qr-result").innerText = "Camera error: " + err;
        });
      }

      if (page === "map") {
        const box = document.createElement("div");
        box.className = "frosted-box";
        box.innerHTML = `
          <div style="font-size:18px; font-weight:600; margin-bottom:8px;">Campus Map</div>
          <img src="https://i.imgur.com/MGb5SBU.png" alt="Map" style="width:100%; border-radius:12px;" />
        `;
        content.appendChild(box);
      }
    }
  </script>
</body>
</html>
